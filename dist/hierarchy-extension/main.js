"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("fs"),t=require("electron"),n=require("path");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=r(e),c=r(n);const i={async setNodeActive(){const e=Editor.Selection.getSelected("node");if(!(e.length<=0))for(let t of e){const e=await Editor.Message.request("scene","query-node",t);await Editor.Message.request("scene","set-property",{uuid:t,path:"active",dump:{type:"Boolean",value:!e.active.value}})}}};function a(){for(const e of t.BrowserWindow.getAllWindows())try{const t=e.webContents.getURL(),n=e.getTitle()||"";if(t.includes("windows/main.html")||n.includes("Cocos Creator"))return e.webContents}catch(e){console.error("获取窗口信息时出错:",e)}return console.error("未找到Cocos Creator主窗口"),null}exports.load=function(){!function(){const e=a();if(!e)return void console.error("注入失败: webContents 为空");const t=o.default.readFileSync(c.default.join(__dirname,"utils.js"),"utf-8"),n=o.default.readFileSync(c.default.join(__dirname,"hierarchy-init.js"),"utf-8"),r=o.default.readFileSync(c.default.join(__dirname,"extensions/node-activator.js"),"utf-8"),i=o.default.readFileSync(c.default.join(__dirname,"extensions/header-node.js"),"utf-8"),s=`\n    (async () => {\n        try {\n            ${t}\n            ${n}\n            ${r}\n            ${i}\n            return true;\n        } catch (error) {\n            console.error('[Hierarchy] 注入失败:', error);\n            return false;\n        }\n    })()`;e.executeJavaScript(s).catch((e=>console.error("注入失败:",e)))}()},exports.methods=i,exports.unload=function(){const e=a();e?e.executeJavaScript("\n        if (window.hierarchy) {\n            window.hierarchy.cleanup();\n        }\n    ").catch((e=>console.error("清理失败:",e))):console.error("清理失败: webContents 为空")};
