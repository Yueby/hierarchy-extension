"use strict";!function(){const t={debounce(t,e){let n=null;return function(...o){n&&clearTimeout(n),n=window.setTimeout((()=>{t.apply(this,o),n=null}),e)}},throttle(t,e){let n=0;return function(...o){const r=Date.now();r-n>=e&&(t.apply(this,o),n=r)}},safeQuerySelector(t,e=document){try{return e.querySelector(t)}catch(e){return console.error("[hierarchy-utils]","选择器错误:",t,e),null}},appendChildren(t,e){const n=document.createDocumentFragment();e.forEach((t=>n.appendChild(t))),t.appendChild(n)},waitForCondition:(t,e=1e4,n=100)=>new Promise(((o,r)=>{const i=Date.now(),c=()=>{t()?o():Date.now()-i>=e?r(new Error("等待条件超时")):setTimeout(c,n)};c()})),async exponentialRetry(t,e=5,n=100){let o=0;for(;;)try{return await t()}catch(t){if(o>=e)throw t;const r=n*Math.pow(2,o);console.warn("[hierarchy-utils]",`重试 ${o+1}/${e}，延迟 ${r}ms`),await new Promise((t=>setTimeout(t,r))),o++}}};window.utils=t}();
